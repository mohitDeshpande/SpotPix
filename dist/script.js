function getImagesFrom500px(e,o){var a=e+","+o+",3km";_500px.api("/photos/search",{geo:a,page:1,sort:"highest_rating",image_size:[2,4]},function(e){$("#gallery").html(""),$(".carousel-inner").html(""),console.log(e.data.photos),$.each(e.data.photos,function(e,o){if(!o.nsfw){var a=o.image_url[0],t=o.image_url[1],n=o.id;$("#gallery").append("<div class='col-3 text-center  gallery-img'><a data-toggle='modal' data-target='#carousel-modal' onclick='setActiveImage("+n+")'><img class='img-fluid' src='"+a+"'></a></div>"),$("<div class='carousel-item' id='"+n+"'><img class='d-block img-fluid' src='"+t+"'></div>").appendTo(".carousel-inner")}}),$(".carouselExampleControls").carousel("pause")})}function setActiveImage(e){$("#"+e).addClass("active")}function addToGallery(){$("#gallery").html()}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:toronto,zoom:12,mapTypeId:"roadmap"}),plotMarkers(map),createMapSearch(map)}function createMapSearch(e){var o=document.getElementById("map-search"),a=new google.maps.places.SearchBox(o);e.controls[google.maps.ControlPosition.TOP].push(o),e.addListener("bounds_changed",function(){a.setBounds(e.getBounds())});var t=[];a.addListener("places_changed",function(){var o=a.getPlaces();if(0!=o.length){t.forEach(function(e){e.setMap(null)}),t=[];var n=new google.maps.LatLngBounds;o.forEach(function(o){if(!o.geometry)return void console.log("Returned place contains no geometry");var a=({url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},new google.maps.Marker({map:e,title:o.name,position:o.geometry.location}));a.addListener("click",function(){getImagesFrom500px(o.geometry.location.lat(),o.geometry.location.lng())}),t.push(a),o.geometry.viewport?n.union(o.geometry.viewport):n.extend(o.geometry.location)}),e.fitBounds(n)}})}function plotMarkers(e){var o=new google.maps.Geocoder,a=new XMLHttpRequest;a.open("GET","/data/locations.json",!1),a.send();var t=JSON.parse(a.responseText),n=t.Locations.Location;n.forEach(function(a){var t=a.PostalCode,n=a.LocationName;o.geocode({address:t},function(o,a){if(a==google.maps.GeocoderStatus.OK){var t=new google.maps.Marker({position:o[0].geometry.location,map:e}),i="<h1>"+n+"</h1>",c=new google.maps.InfoWindow({content:i});t.addListener("click",function(){c.open(e,t),getImagesFrom500px(o[0].geometry.location.lat(),o[0].geometry.location.lng())})}})})}$(function(){_500px.init({sdk_key:"ce6e1bccbc00c66ea23f8f66e54920a432a1fa74"})}),$("#carousel-modal").on("hide.bs.modal",function(e){$(".carousel-inner>div.active").removeClass("active"),console.log("fired hide event")}),$(document).ready(function(){var e="https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=68f9a3498ff770330ef51429836ba68a&user_id=66956608%40N06&format=rest&auth_token=72157678860534383-321835e8bafb0244&api_sig=8f0ca3e941f6fd4f64759402fa3447df",o=$("#allImages").val();$.getJSON(e,{tags:o,per_page:50,format:"json"},function(e){$.each(e.photos.photo,function(e,o){var a="https://farm"+o.farm+".staticflickr.com/"+o.server+"/"+o.id+"_"+o.secret+".jpg";$("#singleImage").append('<img src="'+a+'"/>')})})});var googleAPI="AIzaSyCgMElgfY8buDapA2d3VO-7fWgMJCPqhqk";map=null;var toronto={lat:43.6426,lng:-79.3871};$("section").height($(window).height()),$("#find-btn").click(function(){$("body").animate({scrollTop:$("#map").offset().top},1200)});