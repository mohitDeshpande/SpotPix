function traverse(e){if(e.hasChildNodes()){document.write("<ul><li>"),document.write("<b>"+e.tagName+" : </b>");for(var o=e.childNodes.length,t=0;t<o;t++)traverse(e.childNodes[t]);document.write("</li></ul>")}else document.write(e.nodeValue)}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:toronto,zoom:12,mapTypeId:"roadmap"}),plotMarkers(map),createMapSearch(map)}function createMapSearch(e){var o=document.getElementById("map-search"),t=new google.maps.places.SearchBox(o);e.controls[google.maps.ControlPosition.TOP].push(o),e.addListener("bounds_changed",function(){t.setBounds(e.getBounds())});var n=[];t.addListener("places_changed",function(){var o=t.getPlaces();if(0!=o.length){n.forEach(function(e){e.setMap(null)}),n=[];var a=new google.maps.LatLngBounds;o.forEach(function(o){if(!o.geometry)return void console.log("Returned place contains no geometry");var t={url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};n.push(new google.maps.Marker({map:e,icon:t,title:o.name,position:o.geometry.location})),o.geometry.viewport?a.union(o.geometry.viewport):a.extend(o.geometry.location)}),e.fitBounds(a)}})}function plotMarkers(e){var o=new google.maps.Geocoder,t=new XMLHttpRequest;t.open("GET","/data/locations.json",!1),t.send();var n=JSON.parse(t.responseText);console.log(n);var a=n.Locations.Location;console.log(a),a.forEach(function(t){var n=t.PostalCode,a=t.LocationName;console.log(a),o.geocode({address:n},function(o,t){if(t==google.maps.GeocoderStatus.OK){var n=new google.maps.Marker({position:o[0].geometry.location,map:e}),r="<h1>"+a+"</h1>",i=new google.maps.InfoWindow({content:r});n.addListener("click",function(){i.open(e,n)})}})})}var xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("get","data/locations.xml",!1),xmlhttp.send(null);var xmlDoc=xmlhttp.responseXML,locate=xmlDoc.documentElement;traverse(locate),$(document).ready(function(){var e="https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=68f9a3498ff770330ef51429836ba68a&user_id=66956608%40N06&format=rest&auth_token=72157678860534383-321835e8bafb0244&api_sig=8f0ca3e941f6fd4f64759402fa3447df",o=$("#allImages").val();$.getJSON(e,{tags:o,per_page:50,format:"json"},function(e){$.each(e.photos.photo,function(e,o){var t="https://farm"+o.farm+".staticflickr.com/"+o.server+"/"+o.id+"_"+o.secret+".jpg";$("#singleImage").append('<img src="'+t+'"/>')})})});var googleAPI="AIzaSyCgMElgfY8buDapA2d3VO-7fWgMJCPqhqk";map=null;var toronto={lat:43.6426,lng:-79.3871};$("section").height($(window).height()),$("#find-btn").click(function(){$("body").animate({scrollTop:$("#map").offset().top},1200)});