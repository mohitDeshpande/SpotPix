function traverse(e){if(e.hasChildNodes()){document.write("<ul><li>"),document.write("<b>"+e.tagName+" : </b>");for(var o=e.childNodes.length,t=0;t<o;t++)traverse(e.childNodes[t]);document.write("</li></ul>")}else document.write(e.nodeValue)}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:toronto,zoom:12,mapTypeId:"roadmap"}),createMapSearch(map)}function createMapSearch(e){var o=document.getElementById("map-search"),t=new google.maps.places.SearchBox(o);e.controls[google.maps.ControlPosition.TOP].push(o),e.addListener("bounds_changed",function(){t.setBounds(e.getBounds())});var n=[];t.addListener("places_changed",function(){var o=t.getPlaces();if(0!=o.length){n.forEach(function(e){e.setMap(null)}),n=[];var a=new google.maps.LatLngBounds;o.forEach(function(o){if(!o.geometry)return void console.log("Returned place contains no geometry");var t={url:o.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};n.push(new google.maps.Marker({map:e,icon:t,title:o.name,position:o.geometry.location})),o.geometry.viewport?a.union(o.geometry.viewport):a.extend(o.geometry.location)}),e.fitBounds(a)}})}var xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("get","data/locations.xml",!1),xmlhttp.send(null);var xmlDoc=xmlhttp.responseXML,locate=xmlDoc.documentElement;traverse(locate);var settings={async:!0,crossDomain:!0,url:"https://api.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=223e8cae5910e38f767393f23f8308c8&gallery_id=66911286-72157647277042064&format=json&nojsoncallback=1",method:"GET",headers:{}};$.ajax(settings).done(function(e){console.log(e),$("#allImages").append(e.photos.photo[0].title+" Gallery"),$.each(e.photos.photo,function(e,o){var t=o.farm,n=o.server,a=o.id,l=o.secret;console.log(t+", "+n+", "+a+", "+l),$("#singleImage").append('<img src="https://farm'+t+".staticflickr.com/"+n+"/"+a+"_"+l+'.jpg"/>')})}),map=null;var toronto={lat:43.6426,lng:-79.3871};$("section").height($(window).height()),$("#find-btn").click(function(){$("body").animate({scrollTop:$("#map").offset().top},1200)});